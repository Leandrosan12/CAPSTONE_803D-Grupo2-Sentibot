{% extends "base.html" %}
{% load static %}

{% block title %}Actividades{% endblock %}

{% block content %}
<!-- === Estilos y librer√≠as === -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="{% static 'css/modulo_profesor.css' %}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- === Encabezado === -->
<section class="encabezado-escuelas text-center py-5">
  <h2 class="titulo-modulo">üéì M√≥dulo - Escuelas</h2>
  <p class="descripcion">Selecciona una escuela para acceder a sus actividades</p>
</section>

<!-- === Tarjetas de escuelas === -->
<div class="container container-cards">
  <div class="row justify-content-center g-4">

    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="card-escuela">
        <h5 class="card-title">Inform√°tica y Telecomunicaci√≥n</h5>
        <button class="btn btn-ingresar" onclick="mostrarModulo('modulo-info')">Ingresar</button>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="card-escuela">
        <h5 class="card-title">Construcci√≥n</h5>
        <button class="btn btn-ingresar" onclick="mostrarModulo('modulo-construccion')">Ingresar</button>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="card-escuela">
        <h5 class="card-title">Gastronom√≠a</h5>
        <button class="btn btn-ingresar" onclick="mostrarModulo('modulo-gastro')">Ingresar</button>
      </div>
    </div>

  </div>
</div>

<!-- === M√≥dulo: Inform√°tica === -->
<div id="modulo-info" class="modulo-escuela oculto container text-center p-4">
  <div class="modulo-contenido p-4 rounded shadow-sm text-start bg-white">
    <h4 class="fw-bold mb-3 text-dark">Resumen del Grupo ‚Äî Inform√°tica y Telecomunicaci√≥n</h4>

    <ul class="text-secondary">
      <li>Perfil Psicosocial del Grupo</li>
      <li>Clima Escolar y de Aula</li>
      <li>Factores de Riesgo y Protecci√≥n</li>
      <li>Fortalezas del Grupo</li>
      <li>Necesidades de Intervenci√≥n</li>
      <li>Actividades</li>
    </ul>

    <div class="mt-4 d-flex flex-wrap justify-content-center gap-2">
      <!-- ‚úÖ Solo redirige a los gr√°ficos -->
      <a href="{% url 'grafico_profesor' %}" class="btn btn-primary fw-bold">üìä Gr√°ficos</a>

      <button class="btn btn-warning text-white fw-bold" onclick="editarModulo()">Editar</button>
      <button class="btn btn-secondary fw-bold" onclick="cerrarModulo()">Cerrar</button>
    </div>
  </div>

  <!-- (opcional) secci√≥n de gr√°ficos local, se puede eliminar completamente si ya no se usa -->
  <div id="graficos" class="graficos mt-5 oculto">
    <h4 class="text-dark mb-4 fw-semibold">üìä An√°lisis Gr√°fico</h4>
    <div class="row g-4">
      <div class="col-md-6 col-lg-4"><canvas id="chartEmociones"></canvas></div>
      <div class="col-md-6 col-lg-4"><canvas id="chartSecciones"></canvas></div>
      <div class="col-md-6 col-lg-4"><canvas id="chartComparativa"></canvas></div>
    </div>
  </div>
</div>

<!-- === Variable generada desde Django === -->
<script>
  window.datosEscuelas = JSON.parse('{{ datos_escuelas|escapejs }}');
</script>

<!-- === Archivo JS externo === -->
<script src="{% static 'js/modulo_profesor.js' %}"></script>

{% endblock %}
