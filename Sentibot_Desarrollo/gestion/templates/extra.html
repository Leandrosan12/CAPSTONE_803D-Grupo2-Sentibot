{% extends "base.html" %}
{% load static %}

{% block title %}Emociones Interactivas{% endblock %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: linear-gradient(to bottom, #f5f7fa, #e9f0f7);
    font-family: 'Segoe UI', sans-serif;
}
h1 { font-weight:700; color:#2c3e50; margin-bottom:40px; text-align:center; }

.emotion-card {
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    cursor: pointer;
    background: #fff;
    padding: 30px 20px;
    text-align: center;
}
.emotion-card:hover {
    transform: translateY(-8px) scale(1.05);
    box-shadow: 0 12px 30px rgba(0,0,0,0.2);
}
.emotion-icon { font-size: 5rem; margin-bottom: 15px; }
.card-title { font-weight:700; font-size:1.4rem; color:#34495e; }

.section { display:none; margin-top:50px; }

.question-card {
    background:#fff;
    border-radius:20px;
    padding:30px;
    box-shadow:0 8px 20px rgba(0,0,0,0.1);
    max-width:700px;
    margin:0 auto;
}
.opcion-btn {
    border-radius:15px;
    font-weight:600;
    padding:12px 25px;
    transition:all 0.2s;
}
.opcion-btn:hover {
    transform:scale(1.05);
}

.result-card {
    background: #fff;
    border-radius: 20px;
    padding:25px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    text-align:center;
    margin-top:20px;
}
.result-card h4 { color:#0d6efd; font-weight:700; margin-bottom:15px; }
.recommendations {
    margin-top:20px;
    display:flex;
    flex-wrap:wrap;
    gap:15px;
    justify-content:center;
}
.recommendation-card {
    background:#f8f9fa;
    border-left:5px solid #007bff;
    border-radius:15px;
    padding:15px 20px;
    display:flex;
    align-items:center;
    min-width:200px;
    transition:all 0.2s;
}
.recommendation-card:hover {
    transform:translateY(-5px);
    box-shadow:0 6px 15px rgba(0,0,0,0.1);
}
.recommendation-card span { font-size:1.8rem; margin-right:15px; }
</style>

<div class="container my-5">
    <h1>ğŸŒˆ Descubre tu Estado Emocional</h1>

    <div class="row g-4 justify-content-center">
        <div class="col-md-4 col-lg-2">
            <div class="emotion-card" onclick="iniciarTest('AlegrÃ­a')">
                <div class="emotion-icon">ğŸ˜„</div>
                <h5 class="card-title">AlegrÃ­a</h5>
            </div>
        </div>
        <div class="col-md-4 col-lg-2">
            <div class="emotion-card" onclick="iniciarTest('Tristeza')">
                <div class="emotion-icon">ğŸ˜¢</div>
                <h5 class="card-title">Tristeza</h5>
            </div>
        </div>
        <div class="col-md-4 col-lg-2">
            <div class="emotion-card" onclick="iniciarTest('Miedo')">
                <div class="emotion-icon">ğŸ˜¨</div>
                <h5 class="card-title">Miedo</h5>
            </div>
        </div>
        <div class="col-md-4 col-lg-2">
            <div class="emotion-card" onclick="iniciarTest('Enojo')">
                <div class="emotion-icon">ğŸ˜¡</div>
                <h5 class="card-title">Enojo</h5>
            </div>
        </div>
        <div class="col-md-4 col-lg-2">
            <div class="emotion-card" onclick="iniciarTest('Asco')">
                <div class="emotion-icon">ğŸ¤¢</div>
                <h5 class="card-title">Asco</h5>
            </div>
        </div>
        <div class="col-md-4 col-lg-2">
            <div class="emotion-card" onclick="iniciarTest('Neutral')">
                <div class="emotion-icon">ğŸ˜</div>
                <h5 class="card-title">Neutral</h5>
            </div>
        </div>
    </div>
</div>

<!-- SecciÃ³n Test -->
<div id="testSection" class="section container">
    <div class="question-card text-start">
        <h4 id="emocionSeleccionada"></h4>
        <div id="preguntaTexto" class="mb-3 fs-5 fw-semibold"></div>
        <div id="opcionesContainer" class="d-grid gap-2"></div>
    </div>
    <div id="resultadoDiv" class="result-card" style="display:none;">
        <h4 id="emocionFinal"></h4>
        <p id="significado"></p>
        <div class="recommendations" id="recomendaciones"></div>
    </div>
</div>

<script>
const tests = {
    "AlegrÃ­a": [
        "Â¿Te sientes motivado/a para realizar tus actividades diarias?",
        "Â¿Disfrutas compartir momentos con otras personas?",
        "Â¿Te resulta fÃ¡cil encontrar algo positivo en situaciones difÃ­ciles?",
        "Â¿Sueles dedicar tiempo a tus hobbies o pasatiempos favoritos?",
        "Â¿Te sientes satisfecho/a con los logros recientes que has tenido?"
    ],
    "Tristeza": [
        "Â¿Te sientes abatido/a durante el dÃ­a?",
        "Â¿Necesitas apoyo de otras personas para sentirte mejor?",
        "Â¿Tienes dificultad para disfrutar tus actividades habituales?",
        "Â¿Prefieres estar solo/a para reflexionar?",
        "Â¿Te sientes decaÃ­do/a o sin energÃ­a?"
    ],
    "Miedo": [
        "Â¿Te sientes inseguro/a o ansioso/a actualmente?",
        "Â¿Evitas ciertas situaciones por temor?",
        "Â¿Tu mente se llena de preocupaciones frecuentes?",
        "Â¿Sientes tensiÃ³n o nerviosismo en tu cuerpo?",
        "Â¿Sientes que necesitas protecciÃ³n o seguridad extra?"
    ],
    "Enojo": [
        "Â¿Te irritas fÃ¡cilmente hoy?",
        "Â¿Sientes frustraciÃ³n por situaciones recientes?",
        "Â¿Te cuesta controlar tus impulsos?",
        "Â¿Quieres expresar tu enojo de alguna manera?",
        "Â¿Notas tensiÃ³n fÃ­sica al estar enojado/a?"
    ],
    "Asco": [
        "Â¿Te sientes incÃ³modo/a con algo que viste o experimentaste?",
        "Â¿Evitas ciertas personas o situaciones desagradables?",
        "Â¿Notas aversiÃ³n hacia alimentos, olores o ambientes?",
        "Â¿Sientes rechazo ante algo especÃ­fico?",
        "Â¿Deseas alejarte de lo que te incomoda?"
    ],
    "Neutral": [
        "Â¿Tu dÃ­a ha sido rutinario sin grandes emociones?",
        "Â¿No sientes ni felicidad ni tristeza predominante?",
        "Â¿Te encuentras en un estado equilibrado emocionalmente?",
        "Â¿Tus decisiones hoy han sido calmadas y meditadas?",
        "Â¿Sientes estabilidad en tu Ã¡nimo?"
    ]
};

const significados = {
    "AlegrÃ­a": "EnergÃ­a alta, apertura social",
    "Tristeza": "Necesidad de apoyo o descanso",
    "Miedo": "Necesidad de seguridad o calma",
    "Enojo": "Necesidad de desahogo o justicia",
    "Asco": "Necesidad de distancia o lÃ­mites",
    "Neutral": "Estado equilibrado y estable"
};

const recomendaciones = {
    "AlegrÃ­a": [
        {icon:"ğŸ¶", text:"Escucha tu mÃºsica favorita"},
        {icon:"ğŸƒâ€â™‚ï¸", text:"Sal a caminar al aire libre"},
        {icon:"ğŸ“–", text:"Comparte momentos positivos"}
    ],
    "Tristeza": [
        {icon:"ğŸ“", text:"Escribe tus sentimientos"},
        {icon:"ğŸ’¬", text:"Habla con alguien de confianza"},
        {icon:"ğŸ¨", text:"Realiza algo creativo"}
    ],
    "Miedo": [
        {icon:"ğŸ§˜â€â™‚ï¸", text:"Practica respiraciÃ³n profunda"},
        {icon:"ğŸ“š", text:"InfÃ³rmate para sentir seguridad"},
        {icon:"ğŸ›‹ï¸", text:"Busca un lugar tranquilo y seguro"}
    ],
    "Enojo": [
        {icon:"ğŸƒâ€â™€ï¸", text:"Haz ejercicio fÃ­sico"},
        {icon:"ğŸ–Œï¸", text:"Canaliza la emociÃ³n creativamente"},
        {icon:"ğŸ’¨", text:"Respira profundamente y relÃ¡jate"}
    ],
    "Asco": [
        {icon:"ğŸ§¼", text:"Mantente alejado de lo que incomoda"},
        {icon:"ğŸ§˜â€â™€ï¸", text:"PrÃ¡ctica mindfulness"},
        {icon:"ğŸ“–", text:"Realiza actividades agradables"}
    ],
    "Neutral": [
        {icon:"ğŸ“š", text:"Lee un libro interesante"},
        {icon:"â˜•", text:"TÃ³mate un momento para ti"},
        {icon:"ğŸ§˜â€â™€ï¸", text:"Medita o practica mindfulness"}
    ]
};

let indicePregunta = 0;
let respuestas = [];
let emocionActual = "";

function iniciarTest(emocion){
    emocionActual = emocion;
    indicePregunta = 0;
    respuestas = [];
    document.getElementById('emocionSeleccionada').textContent = "EmociÃ³n seleccionada: " + emocion;
    document.getElementById('testSection').style.display = "block";
    document.getElementById('resultadoDiv').style.display = "none";
    mostrarPregunta();
    window.scrollTo({top:0, behavior:'smooth'});
}

function mostrarPregunta(){
    const preguntas = tests[emocionActual];
    if(indicePregunta < preguntas.length){
        document.getElementById('preguntaTexto').textContent = preguntas[indicePregunta];
        const container = document.getElementById('opcionesContainer');
        container.innerHTML = '';
        ["SÃ­","No"].forEach(op => {
            const btn = document.createElement('button');
            btn.className = "btn btn-outline-primary opcion-btn";
            btn.textContent = op;
            btn.onclick = () => seleccionarRespuesta(op);
            container.appendChild(btn);
        });
    } else {
        mostrarResultado();
    }
}

function seleccionarRespuesta(respuesta){
    respuestas.push(respuesta);
    indicePregunta++;
    mostrarPregunta();
}

function mostrarResultado(){
    document.getElementById('preguntaTexto').textContent = '';
    document.getElementById('opcionesContainer').innerHTML = '';
    document.getElementById('resultadoDiv').style.display = 'block';
    document.getElementById('emocionFinal').textContent = "Tu emociÃ³n predominante es: " + emocionActual;
    document.getElementById('significado').textContent = significados[emocionActual];

    const cont = document.getElementById('recomendaciones');
    cont.innerHTML = '';
    recomendaciones[emocionActual].forEach(r => {
        const div = document.createElement('div');
        div.className = "recommendation-card";
        div.innerHTML = `<span>${r.icon}</span>${r.text}`;
        cont.appendChild(div);
    });

    window.scrollTo({top:0, behavior:'smooth'});
}
</script>
{% endblock %}
