{% extends "base.html" %}
{% load static %}

{% block title %}Seguimiento{% endblock %}

{% block content %}

<div class="container mt-5">
  <h2 class="mb-4 text-center">游늵 Seguimiento de Emociones</h2>

  <div class="row g-4">
    <!-- Gr치fico de Barras -->
    <div class="col-md-6">
      <div class="card shadow-lg border-0 rounded-4 h-100">
        <div class="card-header text-center bg-gradient text-white" 
             style="background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);">
          Distribuci칩n de emociones
        </div>
        <div class="card-body d-flex align-items-center justify-content-center">
          <canvas id="chartBarras" style="max-height:300px;"></canvas>
        </div>
      </div>
    </div>

```
<!-- Gr치fico de Pastel -->
<div class="col-md-6">
  <div class="card shadow-lg border-0 rounded-4 h-100">
    <div class="card-header text-center bg-gradient text-white" 
         style="background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);">
      Porcentaje de emociones
    </div>
    <div class="card-body d-flex align-items-center justify-content-center">
      <canvas id="chartPastel" style="max-height:300px;"></canvas>
    </div>
  </div>
</div>
```

  </div>
</div>

<!-- Chart.js -->

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // Datos din치micos enviados desde Django
  const labels = {{ emociones_labels|safe }};
  const data = {{ emociones_counts|safe }};
  const colors = ['#6a11cb', '#2575fc', '#ff7eb3', '#fbc531', '#4cd137'];

  // Gr치fico de Barras
  new Chart(document.getElementById('chartBarras'), {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Emociones detectadas',
        data: data,
        backgroundColor: colors
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } }
    }
  });

  // Gr치fico de Pastel
  new Chart(document.getElementById('chartPastel'), {
    type: 'pie',
    data: {
      labels: labels,
      datasets: [{
        data: data,
        backgroundColor: colors
      }]
    },
    options: { maintainAspectRatio: false }
  });
</script>

{% endblock %}
